const header=document.querySelector(".header"),body=document.querySelector("body");let scrollPos=0;function promobar(){const e=new XMLHttpRequest,t=document.querySelector("#promo-place-text"),o=document.querySelector("#promo-place-code");e.open("GET","https://www.pikperfect.com/get-discount"),e.responseType="json",e.addEventListener("load",(function(){e.status<400&&(console.log(e.response.code),console.log(e.response.text),o.innerHTML="Code:"+e.response.code,t.innerHTML=" "+e.response.text,t.classList.remove("promobar-hide"),setTimeout(()=>{o.classList.remove("promobar-hide")},600))})),e.send()}window.addEventListener("load",(function(){window.addEventListener("scroll",(function(){scrollPos<window.scrollY&&scrollPos>=50?(header.classList.add("header-hide"),scrollPos=window.scrollY):(header.classList.remove("header-hide"),scrollPos=window.scrollY),window.scrollY>=50?header.classList.add("header-shadow"):header.classList.remove("header-shadow")})),html=document.querySelector("html"),openedNav=document.querySelector(".nav-wrap"),headerNav=document.querySelector(".header-nav");document.querySelector(".header .menu-btn").addEventListener("click",(function(e){header.classList.toggle("menu-open"),header.classList.contains("menu-open"),document.querySelector("body").classList.toggle("overflow"),e.preventDefault()}));const e=document.querySelectorAll(".header .menu > .has-sub-menu");e.forEach(t=>t.addEventListener("click",(function(){this.classList.contains("active")?e.forEach(e=>e.classList.remove("active")):(e.forEach(e=>e.classList.remove("active")),this.classList.add("active"))})))}));const mediaQuery=window.matchMedia("(max-width: 480px)");let baseDelay=200;function srcSeter(e){e.srcset=e.dataset.img}function fullQuality(e,t){const o=e.dataset.priority||0;setTimeout((function(){srcSeter(e.querySelector(".nowebp-img")),srcSeter(e.querySelector(".webp-img")),t.forEach((function(t){srcSeter(e.querySelector(".webp-img-"+t))}))}),1+baseDelay*o)}function toggleMinImg(){const e=document.querySelectorAll(".toggle-img--js");for(let t=0;t<e.length;t++){fullQuality(e[t],[376,480])}}function accordionInit(){window.addEventListener("load",(function(){const e=document.querySelector(".accordion");e.querySelectorAll(".accordion__item").forEach((function(o){o.querySelector(".accordion__title").addEventListener("click",n=>{const r=e.querySelector(".is-open");t(o),r&&r!==o&&t(r)})}));const t=function(e){e.classList.contains("is-open")?e.classList.remove("is-open"):e.classList.add("is-open")}}))}mediaQuery.matches&&(baseDelay=1300),toggleMinImg(),document.querySelector(".accordion")&&accordionInit();const parentLogin=document.querySelector(".popup-login"),parentForgot=document.querySelector(".popup-forgot"),overlay=document.querySelectorAll(".popup__overlay"),closeLogin=document.querySelector(".close-login"),closeForgot=document.querySelector(".close-forgot"),showHidePasswordBtns=document.querySelectorAll(".show-hide-password"),loginBtn='[data-for-tab="login"]',loginContent='[data-tab="login"]',registerBtn='[data-for-tab="register"]',registerContent='[data-tab="register"]',toForgotModalBtn='[data-ref="forgot"]',openModal=e=>{body.style.overflow="hidden",e.classList.add("active")},showHidePassword=()=>{showHidePasswordBtns.forEach(e=>{e.addEventListener("click",()=>{let t=e.parentElement.firstElementChild;"password"===t.type?(t.type="text",setTimeout(()=>{t.type="password"},5e3)):t.type="password"})})};showHidePasswordBtns.forEach(e=>{e.addEventListener("click",()=>{let t=e.parentElement.firstElementChild;"password"===t.type?(t.type="text",setTimeout(()=>{t.type="password"},5e3)):t.type="password"})});const popupLogin=e=>{const t=document.querySelector(".popup-login__title"),o=(e,t)=>{document.querySelector(e).classList.add("active"),document.querySelector(t).classList.add("active")},n=(e,t)=>{document.querySelector(e).classList.remove("active"),document.querySelector(t).classList.remove("active")},r=()=>{body.style.overflow="",parentLogin.classList.remove("active"),n(loginBtn,loginContent),n(registerBtn,registerContent)};!1===e?(o(registerBtn,registerContent),t.innerHTML="Register"):!0===e&&(o(loginBtn,loginContent),t.innerHTML="Login"),document.querySelector(registerBtn).addEventListener("click",()=>{o(registerBtn,registerContent),n(loginBtn,loginContent),t.innerHTML="Register"}),document.querySelector(loginBtn).addEventListener("click",()=>{n(registerBtn,registerContent),o(loginBtn,loginContent),t.innerHTML="Login"}),overlay.forEach(e=>{e.addEventListener("click",r)}),closeLogin.addEventListener("click",r),document.querySelector(toForgotModalBtn).addEventListener("click",r),document.querySelector(toForgotModalBtn).addEventListener("click",popupForgot),openModal(parentLogin)},popupForgot=()=>{document.querySelector(".popup-forgot__form").addEventListener("submit",e=>{const t=document.querySelector(".popup-forgot__success"),o=document.querySelector('.popup-forgot__input input[type="email"]');e.preventDefault(),t.classList.add("show"),o.value="",setTimeout(()=>{t.classList.add("showing")},0),setTimeout(()=>{t.classList.remove("showing")},3500),setTimeout(()=>{t.classList.remove("show")},4e3)});const e=()=>{body.style.overflow="",parentForgot.classList.remove("active")};closeForgot.addEventListener("click",e),overlay.forEach(t=>{t.addEventListener("click",e)}),setTimeout(()=>{openModal(parentForgot)},0)};